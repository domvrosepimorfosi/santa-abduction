<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E.L.F. Squad: Operation Leftover Spirit</title>
    <style>
        /* Tighter Reset styles for Laptop view */
        body {
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            background-color: #2c3e50;
            color: #ecf0f1;
            margin: 0;
            padding: 5px; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            box-sizing: border-box;
        }

        /* Main container */
        #smartboard-container {
            background-color: #34495e;
            width: 98%; 
            max-width: none; 
            border: 8px solid #c0392b;
            border-radius: 15px;
            padding: 10px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            position: relative;
            max-height: 98vh; 
            overflow-y: auto; 
        }

        h1 { font-size: 1.8rem; margin: 10px 0; }
        h2 { font-size: 1.5rem; margin: 10px 0; }
        h1, h2 {
            text-align: center;
            color: #f1c40f;
            text-shadow: 2px 2px 4px #000;
        }
        p { font-size: 1.1rem; }

        /* Images */
        .scene-image {
            width: 75%; 
            height: auto;
            border-radius: 8px;
            border: 3px solid #2c3e50;
            display: block;
            margin: 0 auto 15px auto;
        }

        /* Overlays */
        .dashboard-wrapper {
            position: relative;
            width: 75%; 
            margin: 0 auto 15px auto;
            border: 3px solid #2c3e50;
            border-radius: 8px;
            overflow: hidden;
        }
        .dashboard-bg-image { width: 100%; height: auto; display: block; }
        .logo-overlay {
            position: absolute;
            top: 15px; 
            left: 20px;
            width: 90px; 
            height: auto;
            z-index: 20; 
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
        }
        .image-btn-hotspot {
            position: absolute;
            cursor: pointer;
            z-index: 5;
        }
        .image-btn-hotspot:hover {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }
        /* Button positions */
        #btn-spot-suspects { top: 42%; left: 12%; width: 21%; height: 30%; }
        #btn-spot-clues { top: 42%; left: 39.5%; width: 21%; height: 30%; }
        #btn-spot-solve { top: 42%; left: 67%; width: 21%; height: 30%; }

        /* Navigation Buttons */
        .nav-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        .btn {
            padding: 12px 24px;
            font-size: 1.1rem;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.1s;
            box-shadow: 0 3px #999;
        }
        .btn:active { transform: translateY(2px); box-shadow: 0 1px #666; }
        .btn-green { background-color: #2ecc71; color: white; }
        .btn-red { background-color: #e74c3c; color: white; }
        .btn-blue { background-color: #3498db; color: white; }
        .btn-back { background-color: #95a5a6; color: white; font-size: 1rem;}

        /* Briefing Box */
        .briefing-box {
            background-color: rgba(0, 0, 0, 0.3);
            border-left: 5px solid #f1c40f;
            padding: 15px;
            margin: 10px auto;
            width: 70%;
            border-radius: 5px;
        }

        /* Profile Cards */
        .profiles-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            background-color: #2c3e50;
            padding: 20px;
            border-radius: 10px;
            width: 95%; 
            margin: 0 auto;
            flex-wrap: wrap;
        }
        .profile-card {
            flex: 1 1 180px;
            max-width: 250px;
            background-color: #ecf0f1;
            color: #2c3e50;
            padding: 15px;
            border-radius: 8px;
            font-size: 0.95rem;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
        }
        .profile-card h3 { color: #c0392b; margin-top: 0; font-size: 1.1rem; margin-bottom: 10px;}
        .profile-card p { margin: 8px 0; }

        /* --- NEW DYNAMIC QUIZ STYLES --- */
        #quiz-container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        .quiz-card {
            background-color: #ecf0f1;
            color: #2c3e50;
            padding: 15px;
            border-radius: 10px;
            width: 45%; /* Two cards per row */
            text-align: center;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
            min-width: 250px;
        }
        .quiz-word {
            font-size: 1.3rem;
            color: #c0392b;
            font-weight: bold;
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .quiz-btn {
            padding: 8px 10px;
            font-size: 0.9rem;
            border: 2px solid #2c3e50;
            border-radius: 5px;
            cursor: pointer;
            background: white;
            transition: all 0.2s;
            width: 100%;
        }
        .quiz-btn:hover { background-color: #ddd; }
        
        /* Feedback styles */
        .quiz-btn.correct { background-color: #2ecc71; color: white; border-color: #27ae60; }
        .quiz-btn.wrong { background-color: #e74c3c; color: white; border-color: #c0392b; opacity: 0.6; }


        /* Game Sections */
        .game-section { display: none; padding-bottom: 10px; }
        #section-home { display: block; }

        /* Solve Section */
        .solve-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        .solve-btn {
            padding: 20px;
            font-size: 1rem;
            cursor: pointer;
            background-color: #ecf0f1;
            color: #2c3e50;
            border: 3px solid #c0392b;
            border-radius: 8px;
            width: 160px;
            text-align: center;
        }
        .solve-btn h3 { font-size: 1.2rem; margin: 0 0 5px 0; color: #c0392b;}
        .solve-btn:hover { background-color: #f1c40f; }

        /* Footer */
        .footer {
            margin-top: 20px;
            text-align: center;
            font-size: 0.9rem;
            color: #ecf0f1;
            border-top: 1px solid #c0392b;
            padding-top: 15px;
            opacity: 0.8;
        }

    </style>
</head>
<body onload="initGame()">

<div id="smartboard-container">
    <img src="logo.png" alt="School Logo" class="logo-overlay">

    <div id="section-home" class="game-section">
        <div class="dashboard-wrapper">
            <img src="image_0.png" alt="Main Dashboard UI" class="dashboard-bg-image">
            <a id="btn-spot-suspects" class="image-btn-hotspot" onclick="showSection('section-suspects')" title="See Suspects"></a>
            <a id="btn-spot-clues" class="image-btn-hotspot" onclick="showSection('section-clues-wide')" title="See Clues"></a>
            <a id="btn-spot-solve" class="image-btn-hotspot" onclick="showSection('section-solve')" title="Solve Case"></a>
        </div>
        <div class="briefing-box">
            <h3 style="color: #f1c40f; margin-top: 0;">üéÖ MISSION BRIEFING:</h3>
            <p style="margin-bottom: 0;">
                Halloween is over, but the <strong>Leftover Spirits</strong> refused to go home! 
                <strong>Santa is missing</strong> and his cookies are gone. 
                One of the Halloween spirits is the culprit.
            </p>
        </div>
    </div>


    <div id="section-suspects" class="game-section">
        <h2>THE LEFTOVER SPIRITS</h2>
        <img src="image_1.png" alt="Suspect Lineup" class="scene-image" style="width: 65%;"> 
        <div class="profiles-container">
            <div class="profile-card">
                <h3>1: The Witch</h3>
                <p><strong>Looks:</strong> Green skin. Messy.</p>
                <p><strong>Habits:</strong> Cooks big pots of soup. Strong.</p>
            </div>
            <div class="profile-card">
                <h3>2: The Skeleton</h3>
                <p><strong>Looks:</strong> Only bones. Very thin.</p>
                <p><strong>Habits:</strong> Very tidy. Hates liquids.</p>
            </div>
            <div class="profile-card">
                <h3>3: The Ghost</h3>
                <p><strong>Looks:</strong> Transparent & pale.</p>
                <p><strong>Habits:</strong> Floats. Hates bright lights.</p>
            </div>
        </div>
        <div class="nav-container">
            <button class="btn btn-back" onclick="showSection('section-home')">‚¨Ö Dashboard</button>
            <button class="btn btn-green" onclick="showSection('section-clues-wide')">Clues ‚û°</button>
        </div>
    </div>


    <div id="section-clues-wide" class="game-section">
        <h2>THE CRIME SCENE</h2>
        <p style="text-align: center; font-size: 1.2rem;">Look at the room. What does not belong here?</p>
        <img id="img-crime-scene" src="scene_witch.png" alt="Wide Crime Scene" class="scene-image">
        
        <div class="nav-container">
            <button class="btn btn-back" onclick="showSection('section-home')">‚¨Ö Dashboard</button>
            <button class="btn btn-blue" onclick="showSection('section-vocab')">Analyze Evidence üß†</button>
        </div>
    </div>


    <div id="section-vocab" class="game-section">
        <h2>AGENT TRAINING: VOCABULARY</h2>
        <p style="text-align: center;">Before you enter the lab, prove you know these words:</p>

        <div id="quiz-container"></div>

        <div class="nav-container">
             <button class="btn btn-back" onclick="showSection('section-clues-wide')">‚¨Ö Back</button>
             <button class="btn btn-green" onclick="showSection('section-clues-close')">Go to Lab ‚û°</button>
        </div>
    </div>


    <div id="section-clues-close" class="game-section">
        <h2>THE EVIDENCE LAB</h2>
        <img id="img-evidence" src="clues_witch.png" alt="Evidence Scanning" class="scene-image">
        
        <div class="profiles-container" style="background-color: #34495e;">
            <div class="profile-card">
                <h3 id="clueA-title">Clue A</h3>
                <p id="clueA-text">...</p>
                <p><em id="clueA-deduction">...</em></p>
            </div>
            <div class="profile-card">
                <h3 id="clueB-title">Clue B</h3>
                <p id="clueB-text">...</p>
                <p><em id="clueB-deduction">...</em></p>
            </div>
            <div class="profile-card">
                <h3 id="clueC-title">Clue C</h3>
                <p id="clueC-text">...</p>
                <p><em id="clueC-deduction">...</em></p>
            </div>
        </div>

        <div class="nav-container">
            <button class="btn btn-back" onclick="showSection('section-vocab')">‚¨Ö Vocab</button>
            <button class="btn btn-red" onclick="showSection('section-solve')">Solve! ‚û°</button>
        </div>
    </div>


    <div id="section-solve" class="game-section">
        <h2>FINAL REPORT</h2>
        <p style="text-align: center; font-size: 1.2rem;">Based on the evidence, who is guilty?</p>
        <div class="solve-options">
            <div class="solve-btn" onclick="checkAnswer('witch')">
                <h3>The Witch</h3>
            </div>
            <div class="solve-btn" onclick="checkAnswer('skeleton')">
                <h3>The Skeleton</h3>
            </div>
            <div class="solve-btn" onclick="checkAnswer('ghost')">
                <h3>The Ghost</h3>
            </div>
        </div>
        <div class="nav-container" style="margin-top: 30px;">
            <button class="btn btn-back" onclick="showSection('section-clues-close')">‚¨Ö Review Evidence</button>
        </div>
    </div>


    <div id="section-final" class="game-section">
        <img id="img-final" src="final_witch.png" alt="Case Solved Success Screen" class="scene-image">
        <div style="text-align: center; padding: 20px; background-color: #2ecc71; border-radius: 15px; color: #2c3e50; width: 90%; margin: 0 auto;">
            <h2>CONGRATULATIONS!</h2>
            <p style="font-size: 1.5rem; font-weight: bold;" id="final-culprit-name">It was X!</p>
            <p style="font-size: 1.1rem;" id="final-conclusion">Conclusion text.</p>
        </div>
        <div class="nav-container">
            <button class="btn btn-blue" onclick="location.reload();">Play New Game üîÑ</button>
        </div>
    </div>

    <div class="footer">
        <p>üéÑ‚úçÔ∏è Created by Panagiotis Domvros, English and Drama Teacher, All Rights Reserved ‚úçÔ∏èüéÖ</p>
    </div>

</div>

<script>
    // --- DYNAMIC GAME DATA ---
    const gameScenarios = {
        witch: {
            culpritId: 'witch',
            culpritName: "It was the Witch!",
            // Vocab Quiz Data (Merged Lists)
            quiz: [
                { word: "STICKY", opts: ["Like glue or honey", "Dry like sand"], ans: 0 },
                { word: "MESSY", opts: ["Dirty and untidy", "Clean and organized"], ans: 0 },
                { word: "POT", opts: ["Used for cooking", "Used for writing"], ans: 0 },
                { word: "CAULDRON", opts: ["A large cooking pot", "A small teacup"], ans: 0 }
            ],
            // Evidence Text
            clueA: { title: "The Pot", text: "This pot is very heavy. It smells like old green soup.", ded: "Deduction: Who is strong? Who cooks soup?" },
            clueB: { title: "The Spill", text: "A sticky green liquid (slime) spilled on the rug.", ded: "Deduction: Who is messy? Who hates liquids?" },
            clueC: { title: "The Hat", text: "A pointy black hat crushed under the table.", ded: "Deduction: Whose hat is this?" },
            conclusion: "She was messy with her green soup, and her heavy pot was too heavy for the Ghost. You saved Christmas!"
        },
        skeleton: {
            culpritId: 'skeleton',
            culpritName: "It was the Skeleton!",
            // Vocab Quiz Data (Merged Lists)
            quiz: [
                { word: "RIB", opts: ["A bone in your chest", "A piece of candy"], ans: 0 },
                { word: "WRAPPING PAPER", opts: ["Covers gifts", "Covers windows"], ans: 0 },
                { word: "TIDY", opts: ["Clean and organized", "Messy and dirty"], ans: 0 }
            ],
            // Evidence Text
            clueA: { title: "Dry Rib Bone", text: "A small, dry rib bone found near the fireplace.", ded: "Deduction: Who is made only of bones?" },
            clueB: { title: "Wrapping Paper", text: "The wrapping paper is folded perfectly. It is very tidy.", ded: "Deduction: Who is obsessively clean?" },
            clueC: { title: "Sheet Music", text: "Notes for spooky drum music hidden under the chair.", ded: "Deduction: Who likes to play music on their ribs?" },
            conclusion: "He left a rib bone behind, and the room was too tidy for the Witch! He wanted to play drums on Santa's sleigh."
        },
        ghost: {
            culpritId: 'ghost',
            culpritName: "It was the Ghost!",
            // Vocab Quiz Data (Merged Lists)
            quiz: [
                { word: "SLIME", opts: ["Wet, sticky liquid", "Hard rock"], ans: 0 },
                { word: "ECTOPLASM", opts: ["Ghost goo", "Toothpaste"], ans: 0 },
                { word: "PATCH", opts: ["A small spot", "A whole mountain"], ans: 0 },
                { word: "RUG", opts: ["Carpet on floor", "Curtain on window"], ans: 0 },
                { word: "SMASHED", opts: ["Broken into pieces", "Fixed perfectly"], ans: 0 },
                { word: "DEDUCTION", opts: ["Using clues to think", "Closing your eyes"], ans: 0 },
                { word: "TRANSPARENT", opts: ["You can see through it", "It is solid black"], ans: 0 }
            ],
            // Evidence Text
            clueA: { title: "Smashed Lights", text: "The bright Christmas tree lights have been smashed.", ded: "Deduction: Who hates bright lights?" },
            clueB: { title: "Freezing Spot", text: "There is a freezing cold, icy patch on the rug.", ded: "Deduction: Who leaves cold spots and has no body?" },
            clueC: { title: "Ectoplasm", text: "A faint, transparent slime on the wall.", ded: "Deduction: Who is transparent and slimy?" },
            conclusion: "He smashed the bright lights and left freezing cold spots everywhere because the festive cheer was too bright!"
        }
    };

    let currentScenario = null;

    function initGame() {
        const keys = Object.keys(gameScenarios);
        const randomKey = keys[Math.floor(Math.random() * keys.length)];
        currentScenario = gameScenarios[randomKey];
        
        console.log("Game initialized with culprit: " + currentScenario.culpritId);

        // 1. SWAP IMAGES
        document.getElementById('img-crime-scene').src = 'scene_' + currentScenario.culpritId + '.png';
        document.getElementById('img-evidence').src = 'clues_' + currentScenario.culpritId + '.png';
        document.getElementById('img-final').src = 'final_' + currentScenario.culpritId + '.png';

        // 2. BUILD DYNAMIC QUIZ
        const quizContainer = document.getElementById('quiz-container');
        quizContainer.innerHTML = ''; // Clear previous questions
        
        currentScenario.quiz.forEach((qData, index) => {
            const card = createQuizCard(qData, index);
            quizContainer.appendChild(card);
        });

        // 3. SWAP EVIDENCE TEXT
        document.getElementById('clueA-title').innerText = currentScenario.clueA.title;
        document.getElementById('clueA-text').innerText = currentScenario.clueA.text;
        document.getElementById('clueA-deduction').innerText = currentScenario.clueA.ded;

        document.getElementById('clueB-title').innerText = currentScenario.clueB.title;
        document.getElementById('clueB-text').innerText = currentScenario.clueB.text;
        document.getElementById('clueB-deduction').innerText = currentScenario.clueB.ded;

        document.getElementById('clueC-title').innerText = currentScenario.clueC.title;
        document.getElementById('clueC-text').innerText = currentScenario.clueC.text;
        document.getElementById('clueC-deduction').innerText = currentScenario.clueC.ded;
    }

    // Helper to create HTML for a quiz card
    function createQuizCard(data, index) {
        const div = document.createElement('div');
        div.className = 'quiz-card';

        const wordDiv = document.createElement('div');
        wordDiv.className = 'quiz-word';
        wordDiv.innerText = data.word;

        const optionsDiv = document.createElement('div');
        optionsDiv.className = 'quiz-options';

        const btn1 = document.createElement('button');
        const btn2 = document.createElement('button');
        btn1.className = 'quiz-btn';
        btn2.className = 'quiz-btn';

        // Randomize button position
        if (Math.random() > 0.5) {
            btn1.innerText = data.opts[1];
            btn2.innerText = data.opts[0]; // Correct answer
            btn1.onclick = function() { checkVocab(this, false); };
            btn2.onclick = function() { checkVocab(this, true); };
        } else {
            btn1.innerText = data.opts[0]; // Correct answer
            btn2.innerText = data.opts[1];
            btn1.onclick = function() { checkVocab(this, true); };
            btn2.onclick = function() { checkVocab(this, false); };
        }

        optionsDiv.appendChild(btn1);
        optionsDiv.appendChild(btn2);
        div.appendChild(wordDiv);
        div.appendChild(optionsDiv);
        return div;
    }

    function checkVocab(btn, isCorrect) {
        // Reset sibling buttons
        const parent = btn.parentElement;
        const buttons = parent.getElementsByClassName('quiz-btn');
        for(let b of buttons) {
            b.classList.remove('correct', 'wrong');
        }

        if (isCorrect) {
            btn.classList.add('correct');
        } else {
            btn.classList.add('wrong');
        }
    }

    function checkAnswer(selectedSuspect) {
        if (selectedSuspect === currentScenario.culpritId) {
            var audio = new Audio('audio.mp3');
            audio.play().catch(e => console.log("Audio play failed: " + e));
            document.getElementById('final-culprit-name').innerText = currentScenario.culpritName;
            document.getElementById('final-conclusion').innerText = currentScenario.conclusion;
            showSection('section-final');
        } else {
            alert("That doesn't match the evidence! Look closer.");
        }
    }

    function showSection(sectionId) {
        const sections = document.querySelectorAll('.game-section');
        sections.forEach(section => {
            section.style.display = 'none';
        });
        document.getElementById(sectionId).style.display = 'block';
        document.getElementById('smartboard-container').scrollIntoView({behavior: "smooth"});
    }
</script>

</body>
</html>