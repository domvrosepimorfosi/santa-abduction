<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E.L.F. Squad: Operation Leftover Spirit</title>
    <style>
        /* --- GLOBAL LAYOUT --- */
        body {
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            background-color: #2c3e50;
            color: #ecf0f1;
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        #smartboard-container {
            background-color: #34495e;
            width: 98vw;
            height: 96vh;
            border: 8px solid #c0392b;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.8);
            position: relative;
            box-sizing: border-box;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        /* --- TYPOGRAPHY --- */
        h1, h2 {
            text-align: center;
            color: #f1c40f;
            text-shadow: 2px 2px 4px #000;
            margin: 0 0 10px 0;
            font-size: 1.6rem;
        }
        p { font-size: 1.1rem; margin: 5px 0; line-height: 1.4; }

        /* --- LAYOUT UTILITIES --- */
        .game-section {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #section-home { display: flex; }

        /* SPLIT LAYOUT */
        .split-layout {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            gap: 20px;
        }

        .split-left {
            flex: 3;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            max-width: 65%;
        }

        .split-right {
            flex: 2;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100%;
            max-width: 35%;
        }

        /* --- IMAGES --- */
        .dashboard-wrapper {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .dashboard-bg-image {
            width: 100%;
            height: auto;
            max-height: 85vh;
            object-fit: contain;
            border-radius: 10px;
            border: 4px solid #2c3e50;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* Standard scene images */
        .scene-image {
            max-height: 75vh;
            max-width: 100%;
            width: auto;
            border-radius: 8px;
            border: 3px solid #2c3e50;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        /* Images inside Split Layouts */
        .split-layout .scene-image {
            max-height: 85vh;
            width: 100%;
            object-fit: contain;
            margin-bottom: 0;
        }

        /* --- OVERLAYS --- */
        .logo-overlay {
            position: absolute;
            top: 15px;
            right: 20px;
            width: 80px;
            z-index: 50;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
            transition: opacity 0.3s ease;
        }

        .image-btn-hotspot {
            position: absolute;
            cursor: pointer;
            z-index: 10;
        }
        .image-btn-hotspot:hover {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            box-shadow: 0 0 10px rgba(255,255,255,0.3);
        }
        #btn-spot-suspects { top: 42%; left: 12%; width: 21%; height: 30%; }
        #btn-spot-clues { top: 42%; left: 39.5%; width: 21%; height: 30%; }
        #btn-spot-solve { top: 42%; left: 67%; width: 21%; height: 30%; }


        /* --- CARDS & BOXES --- */
        .briefing-box {
            background-color: rgba(0, 0, 0, 0.4);
            border-left: 6px solid #f1c40f;
            padding: 20px;
            border-radius: 8px;
            font-size: 1.1rem;
            color: #fff;
        }

        /* Used for right-column content in split view */
        .profiles-stack {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
            overflow-y: auto;
            max-height: 70vh;
            padding-right: 5px;
        }

        .profile-card {
            background-color: #ecf0f1;
            color: #2c3e50;
            padding: 12px;
            border-radius: 10px;
            box-shadow: 3px 3px 8px rgba(0,0,0,0.2);
            flex: 1;
            text-align: center;
            font-size: 0.95rem;
        }
        .profile-card h3 { color: #c0392b; font-size: 1.1rem; margin-top: 0; margin-bottom: 5px;}
        .profile-card p { margin: 3px 0; }
        
        /* --- VOCAB QUIZ --- */
        #quiz-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            width: 100%;
            overflow-y: auto;
            max-height: 65vh;
            padding: 10px;
        }
        .quiz-card {
            background-color: #ecf0f1;
            color: #2c3e50;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
            flex: 1 1 200px;
            max-width: 300px;
            text-align: center;
        }
        .quiz-word { font-size: 1.2rem; font-weight: bold; color: #c0392b; text-transform: uppercase; margin-bottom: 5px;}
        .quiz-options { display: flex; flex-direction: column; gap: 5px; }
        .quiz-btn { padding: 8px; border: 2px solid #34495e; background: white; border-radius: 5px; cursor: pointer; font-weight: bold;}
        .quiz-btn:hover { background: #ddd; }
        .quiz-btn.correct { background: #2ecc71; color: white; border-color: #27ae60; }
        .quiz-btn.wrong { background: #e74c3c; color: white; border-color: #c0392b; opacity: 0.6; }

        /* --- BUTTONS --- */
        .nav-container {
            margin-top: auto;
            margin-bottom: 10px;
            display: flex;
            gap: 15px;
            justify-content: center;
            width: 100%;
        }
        .btn {
            padding: 10px 25px;
            font-size: 1.1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .btn:hover { transform: translateY(-2px); filter: brightness(1.1); }
        .btn:active { transform: translateY(1px); }
        .btn-green { background-color: #2ecc71; color: white; }
        .btn-red { background-color: #e74c3c; color: white; }
        .btn-blue { background-color: #3498db; color: white; }
        .btn-back { background-color: #95a5a6; color: white; }

        .solve-options { display: flex; gap: 20px; justify-content: center; width: 100%; margin-top: 20px;}
        .solve-btn {
            padding: 20px;
            background: #ecf0f1;
            color: #2c3e50;
            border: 4px solid #c0392b;
            border-radius: 12px;
            width: 180px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }
        .solve-btn:hover { background: #f1c40f; transform: scale(1.05); }

        /* Footer */
        .footer {
            margin-top: auto;
            padding-top: 10px;
            border-top: 1px solid rgba(255,255,255,0.2);
            width: 100%;
            text-align: center;
            font-size: 0.8rem;
            color: rgba(255,255,255,0.6);
        }

    </style>
</head>
<body onload="initGame()">

<div id="smartboard-container">
    <img id="app-logo" src="logo.png" alt="School Logo" class="logo-overlay">

    <div id="section-home" class="game-section">
        <div class="split-layout">
            <div class="split-left">
                <div class="dashboard-wrapper">
                    <img src="image_0.png" alt="Main Dashboard UI" class="dashboard-bg-image">
                    <a id="btn-spot-suspects" class="image-btn-hotspot" onclick="showSection('section-suspects')" title="See Suspects"></a>
                    <a id="btn-spot-clues" class="image-btn-hotspot" onclick="showSection('section-clues-wide')" title="See Clues"></a>
                    <a id="btn-spot-solve" class="image-btn-hotspot" onclick="showSection('section-solve')" title="Solve Case"></a>
                </div>
            </div>
            <div class="split-right">
                <div class="briefing-box">
                    <h2 style="margin-top: 0;">üéÖ MISSION BRIEFING</h2>
                    <p>Halloween is over, but the <strong>Leftover Spirits</strong> refused to go home!</p>
                    <p><strong>Santa is missing</strong> and his cookies are gone.</p>
                    <p style="margin-top: 15px; color: #f1c40f;">üëâ Tap the dashboard buttons to investigate!</p>
                </div>
            </div>
        </div>
        <div class="footer">Created by Panagiotis Domvros, English and Drama Teacher, All Rights Reserved</div>
    </div>


    <div id="section-suspects" class="game-section">
        <div class="split-layout">
            <div class="split-left">
                <img src="image_1.png" alt="Suspect Lineup" class="scene-image"> 
            </div>
            <div class="split-right">
                <h2 style="margin-bottom: 10px;">SUSPECT PROFILES</h2>
                <div class="profiles-stack">
                    <div class="profile-card">
                        <h3>The Witch</h3>
                        <p><strong>Looks:</strong> Green skin. Messy.</p>
                        <p><strong>Habits:</strong> Cooks big pots of soup. Strong.</p>
                    </div>
                    <div class="profile-card">
                        <h3>The Skeleton</h3>
                        <p><strong>Looks:</strong> Only bones. Very thin.</p>
                        <p><strong>Habits:</strong> Very tidy. Hates liquids.</p>
                    </div>
                    <div class="profile-card">
                        <h3>The Ghost</h3>
                        <p><strong>Looks:</strong> Transparent. Pale.</p>
                        <p><strong>Habits:</strong> Floats. Hates bright lights.</p>
                    </div>
                </div>
                <div class="nav-container" style="margin-top: 15px;">
                    <button class="btn btn-back" onclick="showSection('section-home')">‚¨Ö Dashboard</button>
                    <button class="btn btn-green" onclick="showSection('section-clues-wide')">Clues ‚û°</button>
                </div>
            </div>
        </div>
        <div class="footer">Created by Panagiotis Domvros, English and Drama Teacher, All Rights Reserved</div>
    </div>


    <div id="section-clues-wide" class="game-section">
        <h2>THE CRIME SCENE</h2>
        <p style="text-align: center; margin-bottom: 5px;">What does not belong here?</p>
        <img id="img-crime-scene" src="scene_witch.png" alt="Wide Crime Scene" class="scene-image" style="max-height: 70vh;">
        
        <div class="nav-container">
            <button class="btn btn-back" onclick="showSection('section-home')">‚¨Ö Dashboard</button>
            <button class="btn btn-blue" onclick="showSection('section-vocab')">Analyze Evidence üß†</button>
        </div>
        <div class="footer">Created by Panagiotis Domvros, English and Drama Teacher, All Rights Reserved</div>
    </div>


    <div id="section-vocab" class="game-section">
        <h2>AGENT TRAINING: VOCABULARY</h2>
        <div id="quiz-container">
            </div>
        <div class="nav-container">
             <button class="btn btn-back" onclick="showSection('section-clues-wide')">‚¨Ö Back</button>
             <button class="btn btn-green" onclick="showSection('section-clues-close')">Go to Lab ‚û°</button>
        </div>
        <div class="footer">üéÑ‚úç Created by Panagiotis Domvros, English and Drama Teacher, All Rights Reserved ‚úçüéÖ</div>
    </div>


    <div id="section-clues-close" class="game-section">
        <div class="split-layout">
            <div class="split-left">
                <img id="img-evidence" src="clues_witch.png" alt="Evidence Scanning" class="scene-image">
            </div>
            <div class="split-right">
                <h2 style="margin-bottom: 10px;">EVIDENCE LOG</h2>
                <div class="profiles-stack">
                    <div class="profile-card">
                        <h3 id="clueA-title">Clue A</h3>
                        <p id="clueA-text">...</p>
                        <p><em id="clueA-deduction">...</em></p>
                    </div>
                    <div class="profile-card">
                        <h3 id="clueB-title">Clue B</h3>
                        <p id="clueB-text">...</p>
                        <p><em id="clueB-deduction">...</em></p>
                    </div>
                    <div class="profile-card">
                        <h3 id="clueC-title">Clue C</h3>
                        <p id="clueC-text">...</p>
                        <p><em id="clueC-deduction">...</em></p>
                    </div>
                </div>
                <div class="nav-container" style="margin-top: 15px;">
                    <button class="btn btn-back" onclick="showSection('section-vocab')">‚¨Ö Vocab</button>
                    <button class="btn btn-red" onclick="showSection('section-solve')">Solve! ‚û°</button>
                </div>
            </div>
        </div>
        <div class="footer">Created by Panagiotis Domvros, English and Drama Teacher, All Rights Reserved</div>
    </div>


    <div id="section-solve" class="game-section">
        <h2>FINAL REPORT</h2>
        <p>Based on the evidence, who is guilty?</p>
        <div class="solve-options">
            <div class="solve-btn" onclick="checkAnswer('witch')">
                <h3>The Witch</h3>
            </div>
            <div class="solve-btn" onclick="checkAnswer('skeleton')">
                <h3>The Skeleton</h3>
            </div>
            <div class="solve-btn" onclick="checkAnswer('ghost')">
                <h3>The Ghost</h3>
            </div>
        </div>
        <div class="nav-container">
            <button class="btn btn-back" onclick="showSection('section-clues-close')">‚¨Ö Review Evidence</button>
        </div>
        <div class="footer">Created by Panagiotis Domvros, English and Drama Teacher, All Rights Reserved</div>
    </div>


    <div id="section-final" class="game-section">
        <div class="split-layout">
            <div class="split-left">
                <img id="img-final" src="final_witch.png" alt="Success" class="scene-image">
            </div>
            <div class="split-right">
                <div style="background: #2ecc71; padding: 15px; border-radius: 12px; color: #2c3e50; width: 90%; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">
                    <h2 style="color: #fff; margin-top:0; font-size: 1.4rem;">CONGRATULATIONS!</h2>
                    <p style="font-size: 1.2rem; font-weight: bold; margin: 10px 0;" id="final-culprit-name">It was X!</p>
                    <p style="font-size: 1rem; margin-bottom: 0;" id="final-conclusion">Conclusion text.</p>
                </div>
                <div class="nav-container" style="margin-top: 15px;">
                    <button class="btn btn-blue" onclick="location.reload();">Play New Game üîÑ</button>
                </div>
            </div>
        </div>
        <div class="footer">üéÑ‚úçÔ∏è Created by Panagiotis Domvros, English and Drama Teacher, All Rights Reserved ‚úçÔ∏èüéÖd</div>
    </div>

</div>

<script>
    // --- DYNAMIC GAME DATA ---
    const gameScenarios = {
        witch: {
            culpritId: 'witch',
            culpritName: "It was the Witch!",
            quiz: [
                { word: "STICKY", opts: ["Like glue or honey", "Dry like sand"], ans: 0 },
                { word: "MESSY", opts: ["Dirty and untidy", "Clean and organized"], ans: 0 },
                { word: "POT", opts: ["Used for cooking", "Used for writing"], ans: 0 },
                { word: "CAULDRON", opts: ["A large cooking pot", "A small teacup"], ans: 0 }
            ],
            clueA: { title: "The Pot", text: "This pot is very heavy. It smells like old green soup.", ded: "Deduction: Who is strong? Who cooks soup?" },
            clueB: { title: "The Spill", text: "A sticky green liquid (slime) spilled on the rug.", ded: "Deduction: Who is messy? Who hates liquids?" },
            clueC: { title: "The Hat", text: "A pointy black hat crushed under the table.", ded: "Deduction: Whose hat is this?" },
            conclusion: "She was messy with her green soup, and her heavy pot was too heavy for the Ghost. You saved Christmas!"
        },
        skeleton: {
            culpritId: 'skeleton',
            culpritName: "It was the Skeleton!",
            quiz: [
                { word: "RIB", opts: ["A bone in your chest", "A piece of candy"], ans: 0 },
                { word: "WRAPPING PAPER", opts: ["Covers gifts", "Covers windows"], ans: 0 },
                { word: "TIDY", opts: ["Clean and organized", "Messy and dirty"], ans: 0 }
            ],
            clueA: { title: "Dry Rib Bone", text: "A small, dry rib bone found near the fireplace.", ded: "Deduction: Who is made only of bones?" },
            clueB: { title: "Wrapping Paper", text: "The wrapping paper is folded perfectly. It is very tidy.", ded: "Deduction: Who is obsessively clean?" },
            clueC: { title: "Sheet Music", text: "Notes for spooky drum music hidden under the chair.", ded: "Deduction: Who likes to play music on their ribs?" },
            conclusion: "He left a rib bone behind, and the room was too tidy for the Witch! He wanted to play drums on Santa's sleigh."
        },
        ghost: {
            culpritId: 'ghost',
            culpritName: "It was the Ghost!",
            quiz: [
                { word: "SLIME", opts: ["Wet, sticky liquid", "Hard rock"], ans: 0 },
                { word: "ECTOPLASM", opts: ["Ghost goo", "Toothpaste"], ans: 0 },
                { word: "PATCH", opts: ["A small spot", "A whole mountain"], ans: 0 },
                { word: "RUG", opts: ["Carpet on floor", "Curtain on window"], ans: 0 },
                { word: "SMASHED", opts: ["Broken into pieces", "Fixed perfectly"], ans: 0 },
                { word: "DEDUCTION", opts: ["Using clues to think", "Closing your eyes"], ans: 0 },
                { word: "TRANSPARENT", opts: ["You can see through it", "It is solid black"], ans: 0 }
            ],
            clueA: { title: "Smashed Lights", text: "The bright Christmas tree lights have been smashed.", ded: "Deduction: Who hates bright lights?" },
            clueB: { title: "Freezing Spot", text: "There is a freezing cold, icy patch on the rug.", ded: "Deduction: Who leaves cold spots and has no body?" },
            clueC: { title: "Ectoplasm", text: "A faint, transparent slime on the wall.", ded: "Deduction: Who is transparent and slimy?" },
            conclusion: "He smashed the bright lights and left freezing cold spots everywhere because the festive cheer was too bright!"
        }
    };

    let currentScenario = null;

    function initGame() {
        const keys = Object.keys(gameScenarios);
        const randomKey = keys[Math.floor(Math.random() * keys.length)];
        currentScenario = gameScenarios[randomKey];
        
        console.log("Game initialized with culprit: " + currentScenario.culpritId);

        // 1. SWAP IMAGES
        document.getElementById('img-crime-scene').src = 'scene_' + currentScenario.culpritId + '.png';
        document.getElementById('img-evidence').src = 'clues_' + currentScenario.culpritId + '.png';
        document.getElementById('img-final').src = 'final_' + currentScenario.culpritId + '.png';

        // 2. BUILD DYNAMIC QUIZ
        const quizContainer = document.getElementById('quiz-container');
        quizContainer.innerHTML = ''; 
        
        currentScenario.quiz.forEach((qData, index) => {
            const card = createQuizCard(qData, index);
            quizContainer.appendChild(card);
        });

        // 3. SWAP EVIDENCE TEXT
        document.getElementById('clueA-title').innerText = currentScenario.clueA.title;
        document.getElementById('clueA-text').innerText = currentScenario.clueA.text;
        document.getElementById('clueA-deduction').innerText = currentScenario.clueA.ded;
        document.getElementById('clueB-title').innerText = currentScenario.clueB.title;
        document.getElementById('clueB-text').innerText = currentScenario.clueB.text;
        document.getElementById('clueB-deduction').innerText = currentScenario.clueB.ded;
        document.getElementById('clueC-title').innerText = currentScenario.clueC.title;
        document.getElementById('clueC-text').innerText = currentScenario.clueC.text;
        document.getElementById('clueC-deduction').innerText = currentScenario.clueC.ded;
    }

    function createQuizCard(data, index) {
        const div = document.createElement('div');
        div.className = 'quiz-card';
        div.innerHTML = `<div class="quiz-word">${data.word}</div>`;

        const optionsDiv = document.createElement('div');
        optionsDiv.className = 'quiz-options';

        const btn1 = document.createElement('button');
        const btn2 = document.createElement('button');
        btn1.className = 'quiz-btn';
        btn2.className = 'quiz-btn';

        if (Math.random() > 0.5) {
            btn1.innerText = data.opts[1];
            btn2.innerText = data.opts[0]; 
            btn1.onclick = function() { checkVocab(this, false); };
            btn2.onclick = function() { checkVocab(this, true); };
        } else {
            btn1.innerText = data.opts[0]; 
            btn2.innerText = data.opts[1];
            btn1.onclick = function() { checkVocab(this, true); };
            btn2.onclick = function() { checkVocab(this, false); };
        }

        optionsDiv.appendChild(btn1);
        optionsDiv.appendChild(btn2);
        div.appendChild(optionsDiv);
        return div;
    }

    function checkVocab(btn, isCorrect) {
        const parent = btn.parentElement;
        const buttons = parent.getElementsByClassName('quiz-btn');
        for(let b of buttons) {
            b.classList.remove('correct', 'wrong');
        }
        if (isCorrect) {
            btn.classList.add('correct');
        } else {
            btn.classList.add('wrong');
        }
    }

    function checkAnswer(selectedSuspect) {
        if (selectedSuspect === currentScenario.culpritId) {
            var audio = new Audio('audio.mp3');
            audio.play().catch(e => console.log("Audio play failed: " + e));
            document.getElementById('final-culprit-name').innerText = currentScenario.culpritName;
            document.getElementById('final-conclusion').innerText = currentScenario.conclusion;
            showSection('section-final');
        } else {
            alert("That doesn't match the evidence! Look closer.");
        }
    }

    function showSection(sectionId) {
        const sections = document.querySelectorAll('.game-section');
        const logo = document.getElementById('app-logo');

        sections.forEach(section => {
            section.style.display = 'none';
        });
        
        // DISPLAY LOGIC: Use 'flex' for layout centering
        document.getElementById(sectionId).style.display = 'flex';

        // LOGO LOGIC: Hide on Vocab section, Show on others
        if (sectionId === 'section-vocab') {
            logo.style.display = 'none';
        } else {
            logo.style.display = 'block';
        }
    }
</script>

</body>

</html>
